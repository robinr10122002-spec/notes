<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <ol class="hobbies-container"></ol>
    <script>
      //.........................................task-1-completed............................................................................................
      // fetch(
      //   "https://restcountries.com/v3.1/all?fields=name,flags,region,population,capital",
      // ).then((response)=>response.json())
      // .then((data)=>(data))
      // .then((name)=>console.log(name.map((common)=>common?.name?.common??"Country name is not present")))

      //............................................task-2-completed......................................................................................
      //   fetch(
      //     "https://restcountries.com/v3.1/all?fields=name,flags,region,population,capital",
      //   )
      //     .then((response) => response.json())
      //     .then((data) => data)
      //     .then((result) =>
      //       result
      //         .filter((res) => res.population >= 1_00_00_000)
      //         .toSorted((countryA,countryB) => countryB.population - countryA.population)
      //         .map((ans) => ans.name.common),
      //     )
      //     .then((total) => console.log(total));

      //.........................................................task-3-completed..............................................................................................................................
      //Print countries with a population of more than 10,000,000.
      fetch(
        "https://restcountries.com/v3.1/all?fields=name,flags,region,population,capital",
      )
        .then((response) => response.json())
        .then((data) => data)
        .then((result) =>
          result
            .filter((res) => res.population >= 1_00_00_000)
            .toSorted(
              (countryA, countryB) => countryB.population - countryA.population,
            )
            .map(
              (ans, ind) => `${ind + 1}. ${ans.name.common}: ${ans.population}`,
            )
            .join(" \n "),
        )
        .then((result) => console.log(result));
      //................................................task-4-completed......................................................................................
      //            Get the top 10 most populated countries in descending order

      // fetch(
      //   "https://restcountries.com/v3.1/all?fields=name,flags,region,population,capital",
      // )
      //   .then((response) => response.json())
      //   .then((data) => data)
      //   .then((result) =>
      //     result
      //       .filter((res) => res.population >= 1_00_00_000)
      //       .toSorted(
      //         (countryA, countryB) => countryB.population - countryA.population,
      //       )
      //       .slice(0,10)
      //       .map((ans, ind) =>
      //         console.log(`0${ind}. ${ans.name.common}: ${ans.population}`),
      //       ),
      //   );

      // 1. India - 150000000
      // 2. China - 120000000
      // ...
      // //...............................................................................................................................
      //.........................................task-5................................................................................
      //Display the Top 10 most populated countries on the screen as a list.

      fetch(
        "https://restcountries.com/v3.1/all?fields=name,flags,region,population,capital",
      )
        .then((response) => response.json())
        .then((data) => data)
        .then((result) =>
          result
            .filter((res) => res.population >= 1_00_00_000)
            .toSorted(
              (countryA, countryB) => countryB.population - countryA.population,
            )
            .slice(0, 10)
            .map((ans, ind) => ` ${ans.name.common} - ${ans.population}`),
        )
        .then((message) => message)
        .then((messages) => {
          for (let msg of messages) {
            const listItem = document.createElement("li");
            listItem.innerText = msg;
            document.querySelector(".hobbies-container").append(listItem);
          }
        });

      //       <ol>
      //     <li>India - 150000000</li>
      //     ...

      // </ol>
    </script>
  </body>
</html>
